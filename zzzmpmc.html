<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ESP8266 Control Center</title>
    <link rel="stylesheet" href="zzzmpmcstyles.css" />
  </head>

  <body>
    <div class="container">
      <header>
        <h1>üéõÔ∏è ESP8266 Control Center</h1>
        <p class="subtitle">
          Text ‚Üî Morse ‚Üî Braille ‚Üî Home Automation ‚Üî Gesture Control
        </p>
      </header>

      <div class="main-menu">
        <div class="feature-card" onclick="openModal('morse-encode')">
          <div class="feature-icon">üì°</div>
          <div class="feature-title">Text to Morse</div>
          <div class="feature-desc">
            Convert text to Morse code and control LED/buzzer output
          </div>
        </div>

        <div class="feature-card" onclick="openModal('morse-decode')">
          <div class="feature-icon">üîç</div>
          <div class="feature-title">Morse to Text</div>
          <div class="feature-desc">
            Decode Morse code input into readable text
          </div>
        </div>

        <div class="feature-card" onclick="openModal('braille-translate')">
          <div class="feature-icon">‚†É</div>
          <div class="feature-title">Text to Braille</div>
          <div class="feature-desc">
            Convert text to Braille and display on LED array
          </div>
        </div>

        <div class="feature-card" onclick="openModal('home-automation')">
          <div class="feature-icon">üè†</div>
          <div class="feature-title">Home Automation</div>
          <div class="feature-desc">
            Control lights and fans with voice or text commands
          </div>
        </div>

        <!-- Hand Gesture Control Card - NOW IN THE RIGHT PLACE -->
        <div class="feature-card" onclick="openModal('gesture-control')">
          <div class="feature-icon">‚úã</div>
          <div class="feature-title">Hand Gesture Control</div>
          <div class="feature-desc">
            Control devices using hand gestures via webcam
          </div>
        </div>
      </div>
    </div>

    <!-- Text to Morse Modal -->
    <div id="morse-encode" class="modal">
      <div class="modal-content">
        <span class="close-btn" onclick="closeModal('morse-encode')"
          >&times;</span
        >
        <div class="modal-header">
          <h2 class="modal-title">üì° Text to Morse Converter</h2>
        </div>

        <div class="form-group">
          <label for="text-input">Enter Text:</label>
          <textarea
            id="text-input"
            placeholder="Type your message or use voice..."
          ></textarea>
        </div>

        <div class="voice-control">
          <div
            class="mic-container"
            onclick="toggleVoiceRecording('text-input')"
          >
            <button class="mic-button" id="mic-btn-text">
              <span class="mic-icon">üé§</span>
            </button>
            <div class="pulse-ring"></div>
          </div>

          <div class="audio-visualizer" id="visualizer-text">
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
          </div>

          <div class="voice-status" id="status-text">
            Click microphone to start recording
          </div>

          <div class="voice-controls-buttons">
            <button
              class="voice-btn stop"
              id="stop-btn-text"
              onclick="stopVoiceRecording('text-input')"
              disabled
            >
              ‚èπÔ∏è Stop Recording
            </button>
            <button
              class="voice-btn"
              id="clear-btn-text"
              onclick="clearText('text-input')"
            >
              üóëÔ∏è Clear Text
            </button>
          </div>
        </div>

        <div class="form-group">
          <label>Output Options:</label>
          <div class="checkbox-group">
            <div class="checkbox-item">
              <input type="checkbox" id="led-morse" checked />
              <label for="led-morse">LED Blink</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="buzzer-morse" checked />
              <label for="buzzer-morse">Buzzer Sound</label>
            </div>
          </div>
        </div>

        <button class="btn" onclick="convertToMorse()">
          Convert & Send to ESP
        </button>
        <div class="output-box" id="morse-output">
          Morse code will appear here...
        </div>
        <div class="status-message" id="morse-status"></div>
      </div>
    </div>

    <!-- Morse to Text Modal -->
    <div id="morse-decode" class="modal">
      <div class="modal-content">
        <span class="close-btn" onclick="closeModal('morse-decode')"
          >&times;</span
        >
        <div class="modal-header">
          <h2 class="modal-title">üîç Morse to Text Decoder</h2>
        </div>

        <div class="form-group">
          <label for="morse-input">Enter Morse Code (use . and -):</label>
          <textarea
            id="morse-input"
            placeholder="... --- ... (or speak the morse code)"
          ></textarea>
        </div>

        <div class="voice-control">
          <div
            class="mic-container"
            onclick="toggleVoiceRecording('morse-input')"
          >
            <button class="mic-button" id="mic-btn-morse">
              <span class="mic-icon">üé§</span>
            </button>
            <div class="pulse-ring"></div>
          </div>

          <div class="audio-visualizer" id="visualizer-morse">
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
          </div>

          <div class="voice-status" id="status-morse">
            Click microphone to start recording
          </div>

          <div class="voice-controls-buttons">
            <button
              class="voice-btn stop"
              id="stop-btn-morse"
              onclick="stopVoiceRecording('morse-input')"
              disabled
            >
              ‚èπÔ∏è Stop Recording
            </button>
            <button
              class="voice-btn"
              id="clear-btn-morse"
              onclick="clearText('morse-input')"
            >
              üóëÔ∏è Clear Text
            </button>
          </div>
        </div>

        <div class="form-group">
          <label>Playback Options:</label>
          <div class="checkbox-group">
            <div class="checkbox-item">
              <input type="checkbox" id="led-decode" />
              <label for="led-decode">Show on LED</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="buzzer-decode" />
              <label for="buzzer-decode">Play on Buzzer</label>
            </div>
          </div>
        </div>

        <button class="btn" onclick="convertFromMorse()">
          Decode & Send to ESP
        </button>
        <div class="output-box" id="text-output">
          Decoded text will appear here...
        </div>
        <div class="status-message" id="decode-status"></div>
      </div>
    </div>

    <!-- Braille Translator Modal -->
    <div id="braille-translate" class="modal">
      <div class="modal-content">
        <span class="close-btn" onclick="closeModal('braille-translate')"
          >&times;</span
        >
        <div class="modal-header">
          <h2 class="modal-title">‚†É Text to Braille Translator</h2>
        </div>

        <div class="form-group">
          <label for="braille-input">Enter Text:</label>
          <textarea
            id="braille-input"
            placeholder="Type your message or use voice..."
          ></textarea>
        </div>

        <div class="voice-control">
          <div
            class="mic-container"
            onclick="toggleVoiceRecording('braille-input')"
          >
            <button class="mic-button" id="mic-btn-braille">
              <span class="mic-icon">üé§</span>
            </button>
            <div class="pulse-ring"></div>
          </div>

          <div class="audio-visualizer" id="visualizer-braille">
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
          </div>

          <div class="voice-status" id="status-braille">
            Click microphone to start recording
          </div>

          <div class="voice-controls-buttons">
            <button
              class="voice-btn stop"
              id="stop-btn-braille"
              onclick="stopVoiceRecording('braille-input')"
              disabled
            >
              ‚èπÔ∏è Stop Recording
            </button>
            <button
              class="voice-btn"
              id="clear-btn-braille"
              onclick="clearText('braille-input')"
            >
              üóëÔ∏è Clear Text
            </button>
          </div>
        </div>

        <div class="form-group">
          <label>Display Options:</label>
          <div class="checkbox-group">
            <div class="checkbox-item">
              <input type="checkbox" id="led-braille" checked />
              <label for="led-braille">Display on LED Array</label>
            </div>
          </div>
        </div>

        <button class="btn" onclick="convertToBraille()">
          Convert & Send to ESP
        </button>
        <div class="output-box" id="braille-output">
          Braille pattern will appear here...
        </div>
        <div class="braille-visual" id="braille-visual"></div>
        <div class="status-message" id="braille-status"></div>
      </div>
    </div>

    <!-- Home Automation Modal -->
    <div id="home-automation" class="modal">
      <div class="modal-content modal-large">
        <span class="close-btn" onclick="closeModal('home-automation')"
          >&times;</span
        >
        <div class="modal-header">
          <h2 class="modal-title">üè† Home Automation Control</h2>
        </div>

        <!-- Voice/Text Command Section -->
        <div class="form-group">
          <label for="home-command-input">Voice/Text Command:</label>
          <textarea
            id="home-command-input"
            placeholder="Try: 'Turn on bedroom light' or 'Switch off garage fan'"
          ></textarea>
        </div>

        <div class="voice-control">
          <div
            class="mic-container"
            onclick="toggleVoiceRecording('home-command-input')"
          >
            <button class="mic-button" id="mic-btn-home">
              <span class="mic-icon">üé§</span>
            </button>
            <div class="pulse-ring"></div>
          </div>

          <div class="audio-visualizer" id="visualizer-home">
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
            <div class="audio-bar"></div>
          </div>

          <div class="voice-status" id="status-home">
            Click microphone to start voice command
          </div>

          <div class="voice-controls-buttons">
            <button
              class="voice-btn stop"
              id="stop-btn-home"
              onclick="stopVoiceRecording('home-command-input')"
              disabled
            >
              ‚èπÔ∏è Stop Recording
            </button>
            <button
              class="voice-btn"
              id="clear-btn-home"
              onclick="clearText('home-command-input')"
            >
              üóëÔ∏è Clear
            </button>
          </div>
        </div>

        <button class="btn" onclick="processHomeCommand()">
          Execute Command
        </button>

        <div class="command-help">
          <strong>üí° Command Examples:</strong><br />
          ‚Ä¢ "Turn on bedroom light"<br />
          ‚Ä¢ "Switch off garage fan"<br />
          ‚Ä¢ "Bedroom light on"<br />
          ‚Ä¢ "Turn off all lights"<br />
          ‚Ä¢ "Office fan on"
        </div>

        <div class="status-message" id="home-status"></div>

        <!-- Manual Control Panel -->
        <div class="home-control-panel">
          <div class="room-section">
            <h3>üõèÔ∏è Bedroom</h3>
            <div class="device-controls">
              <div class="device-card" id="bedroom-light-card">
                <div class="device-icon">üí°</div>
                <div class="device-name">Light</div>
                <div class="device-state" id="bedroom-light-state">OFF</div>
                <button
                  class="toggle-btn"
                  onclick="toggleDevice('bedroom', 'light')"
                >
                  Toggle
                </button>
              </div>
              <div class="device-card" id="bedroom-fan-card">
                <div class="device-icon">üåÄ</div>
                <div class="device-name">Fan</div>
                <div class="device-state" id="bedroom-fan-state">OFF</div>
                <button
                  class="toggle-btn"
                  onclick="toggleDevice('bedroom', 'fan')"
                >
                  Toggle
                </button>
              </div>
            </div>
          </div>

          <div class="room-section">
            <h3>üõãÔ∏è Garage</h3>
            <div class="device-controls">
              <div class="device-card" id="garage-light-card">
                <div class="device-icon">üí°</div>
                <div class="device-name">Light</div>
                <div class="device-state" id="garage-light-state">OFF</div>
                <button
                  class="toggle-btn"
                  onclick="toggleDevice('garage', 'light')"
                >
                  Toggle
                </button>
              </div>
              <div class="device-card" id="garage-fan-card">
                <div class="device-icon">üåÄ</div>
                <div class="device-name">Fan</div>
                <div class="device-state" id="garage-fan-state">OFF</div>
                <button
                  class="toggle-btn"
                  onclick="toggleDevice('garage', 'fan')"
                >
                  Toggle
                </button>
              </div>
            </div>
          </div>

          <div class="room-section">
            <h3>üíº Office</h3>
            <div class="device-controls">
              <div class="device-card" id="office-light-card">
                <div class="device-icon">üí°</div>
                <div class="device-name">Light</div>
                <div class="device-state" id="office-light-state">OFF</div>
                <button
                  class="toggle-btn"
                  onclick="toggleDevice('office', 'light')"
                >
                  Toggle
                </button>
              </div>
              <div class="device-card" id="office-fan-card">
                <div class="device-icon">üåÄ</div>
                <div class="device-name">Fan</div>
                <div class="device-state" id="office-fan-state">OFF</div>
                <button
                  class="toggle-btn"
                  onclick="toggleDevice('office', 'fan')"
                >
                  Toggle
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
          <h3>‚ö° Quick Actions</h3>
          <button class="quick-btn" onclick="quickAction('all-on')">
            üåü All ON
          </button>
          <button class="quick-btn" onclick="quickAction('all-off')">
            üåô All OFF
          </button>
          <button class="quick-btn" onclick="quickAction('lights-on')">
            üí° All Lights ON
          </button>
          <button class="quick-btn" onclick="quickAction('lights-off')">
            üí° All Lights OFF
          </button>
          <button class="quick-btn" onclick="quickAction('fans-on')">
            üí® All Fans ON
          </button>
          <button class="quick-btn" onclick="quickAction('fans-off')">
            üí® All Fans OFF
          </button>
        </div>
      </div>
    </div>

    <!-- Hand Gesture Control Modal -->
    <div id="gesture-control" class="modal">
      <div class="modal-content">
        <span class="close-btn" onclick="closeModal('gesture-control')"
          >&times;</span
        >
        <div class="modal-header">
          <h2 class="modal-title">‚úã Hand Gesture Control</h2>
        </div>

        <div class="gesture-info">
          <p><strong>How it works:</strong></p>
          <ul>
            <li>Show your hand to the camera</li>
            <li>Raise fingers to control LEDs (1-5 fingers = 1-5 LEDs)</li>
            <li>Close your fist to turn off all LEDs</li>
          </ul>

          <div class="gesture-visual">
            <div class="gesture-example">
              <div class="gesture-icon">‚úä</div>
              <div class="gesture-label">Closed Fist = All OFF</div>
            </div>
            <div class="gesture-example">
              <div class="gesture-icon">‚òùÔ∏è</div>
              <div class="gesture-label">1 Finger = 1 LED</div>
            </div>
            <div class="gesture-example">
              <div class="gesture-icon">‚úåÔ∏è</div>
              <div class="gesture-label">2 Fingers = 2 LEDs</div>
            </div>
            <div class="gesture-example">
              <div class="gesture-icon">‚úã</div>
              <div class="gesture-label">5 Fingers = 5 LEDs</div>
            </div>
          </div>
        </div>

        <div class="gesture-status-box" id="gesture-status-box">
          <div class="status-indicator" id="gesture-indicator">‚ö™</div>
          <div class="status-text" id="gesture-status-text">Not Running</div>
        </div>

        <div class="button-group">
          <button
            class="btn btn-primary"
            id="start-gesture-btn"
            onclick="startGestureControl()"
          >
            üé• Start Gesture Control
          </button>
          <button
            class="btn btn-danger"
            id="stop-gesture-btn"
            onclick="stopGestureControl()"
            disabled
          >
            ‚èπÔ∏è Stop Gesture Control
          </button>
        </div>

        <div class="warning-box">
          ‚ö†Ô∏è <strong>Note:</strong> Camera window will open on your desktop.
          Close the window to stop gesture control.
        </div>

        <div class="status-message" id="gesture-control-status"></div>
      </div>
    </div>

    <script src="zzzmpmcscript.js"></script>
  </body>
</html>
